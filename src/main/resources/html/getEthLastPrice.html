<!DOCTYPE html>
<html>
<head>
	<script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>获取eth最新价格</title>
    <script>	
	
	   // 初始化 vConsole
  	   const vConsole = new VConsole();

		// 获取以太最新的价格
		function getEthLastPrice() {
			var minPrice = document.getElementById("minPrice").value;
			var url = "https://api.etherscan.io/api?module=stats&action=ethprice&apikey=4WFSZ4H2GRG1BZ58BAXS2KWT1WNGGG85TG";
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4) {
					if (xhr.status == 200) {
					   	const result = JSON.parse(xhr.responseText);
						console.log(result.result.ethusd);
					   if(result.result.ethusd > minPrice) {
					   		alert("起床了！！！！！！");
					   }
					}
				}
			};
			xhr.open("GET", url);
			xhr.send();
			setTimeout("getEthLastPrice()",1000 );
		}

		const audio = document.getElementById("myAudio");

		function playAudio() {
			audio.play();
		}

		function pauseAudio() {
			audio.pause();
		}

		function stopAudio() {
			audio.pause();
			audio.currentTime = 0; // 将音频时间重置为 0
		}
	</script>
</head>
<body>
    <h1>查询钱包余额为</h1>
    <p>输入以太价格下限</p><input id="minPrice"></input>
    <button onclick="getEthLastPrice()">查询</button>
	<button onclick="clearTime()">结束</button>
	<table width="60%" id="data_table" border="1"> 
		<tr> 
			<td>余额</td>
			<td></td> 
		</tr> 
	</table>

	<audio id="myAudio" src="E:/Program Files (x86)/Tencent/WeMeet/3.23.3.403/resources/raw/ringing_short.mp3"></audio>
	<button onclick="playAudio()">播放</button>
	<button onclick="pauseAudio()">暂停</button>
	<button onclick="stopAudio()">停止</button>


</body>
</html>